<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LFA Overlay</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #1a1a1a;
      font-family: Arial, sans-serif;
      color: white;
      overflow: hidden;
    }

    #live-banner {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: rgba(0, 0, 0, 0.8);
      padding: 4px 12px;
      border-radius: 5px;
      font-size: 1.125rem;
      font-weight: bold;
      letter-spacing: 1px;
      height: 26px;
      display: flex;
      align-items: center;
    }

    #live-banner span {
      color: red;
    }

    .weather-bar {
      position: absolute;
      bottom: 0;
      width: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      padding: 8px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.125rem;
      box-sizing: border-box;
    }

    .data-group {
      display: flex;
      align-items: center;
      gap: 25px;
      flex: 1;
    }

    .weather-section {
      display: flex;
      align-items: center;
      gap: 4px;
      height: 30px;
    }

    .direction-arrow-wrapper {
      position: relative;
      width: 20px;
      height: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .direction-arrow {
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-bottom: 15px solid red;
      transform-origin: center center;
      transition: transform 0.3s ease;
      margin-left: 14px;
    }

    .weather-icon {
      width: 30px;
      height: 30px;
      margin-left: 5px;
    }

    .time-display {
      font-size: 1.2rem;
      font-weight: bold;
      white-space: nowrap;
      padding-left: 10px;
    }

    .scrolling-column {
      flex: 2;
      overflow: hidden;
      height: 30px;
      position: relative;
    }

    .scrolling-banner {
      white-space: nowrap;
      color: white;
      font-size: 1.125rem;
      font-weight: bold;
      animation: scroll-banner 200s linear infinite;
      position: absolute;
      will-change: transform;
      line-height: 30px;
    }
    
.highlight-subscribe {
  background-color: red;
  color: white;
  padding: 4px 0.6em;          /* vertical: 2px, horizontal: ~1.5 characters */
  border-radius: 4px;
  display: inline-block;
  font-weight: bold;
  line-height: 1;              /* keeps it tight, avoids clipping */
  vertical-align: middle;      /* aligns better with surrounding text */
}
    .scrolling-banner span {
      margin-right: 40px;
    }

    @keyframes scroll-banner {
      0% {
        transform: translateX(40%);
      }
      100% {
        transform: translateX(-100%);
      }
    }
  </style>
</head>
<body>
  <div id="live-banner"><span>LIVE</span>&nbsp;EAST MIDLANDS AIRPORT</div>
  
  <div class="weather-bar">
    <div class="data-group">
      <div class="weather-section" id="temp-section">TEMP: <span id="temp"></span></div>
      <div class="weather-section" id="feels-section">FEELS: <span id="feels-like"></span></div>
      <div class="weather-section" id="weather-section">WEATHER: <img id="weather-icon" class="weather-icon" src="" alt="Icon"></div>
      <div class="weather-section" id="wind-section" style="margin-left: -10px;"> <!-- Adjusted margin here -->
        WIND: <span id="wind-speed"></span>
        <div class="direction-arrow-wrapper">
          <div class="direction-arrow" id="direction-arrow"></div>
        </div>
      </div>
      <div class="weather-section" id="vis-section">VIS: <span id="visibility"></span></div>
      
      <div class="scrolling-column">
  <div class="scrolling-banner">
    
<span>WELCOME TO LIVE FLIGHT ACTION!</span>
<SPAN>YOU‚ÄôRE PART OF AN AMAZING AVIATION JOURNEY!</span>
<span class="highlight-subscribe">SUBSCRIBE</span>
<span>JOIN OUR REGULAR STREAMS LIVE FROM EAST MIDLANDS AIRPORT</SPAN>
<SPAN>THE LARGEST DEDICATED AIR CARGO HUB IN THE UK üì¶‚úàÔ∏è </span>
<span class="highlight-subscribe">SUBSCRIBE</span>
<span>BRINGING YOU THE BEST ACTION AT EAST MIDLANDS AIRPORT, ENJOY ALL OF OUR CONTENT UP-CLOSE, RAW AND IN 4K ON EVERY STREAM</span>
<span class="highlight-subscribe">SUBSCRIBE</span>
<span>THANK YOU TO ALL OF OUR SUBSCRIBERS, FREQUENT FLYER AND BOARDING PASS MEMBERS FOR YOUR CONTINUED SUPPORT!</span>
<span style="color: GOLD;">WE‚ÄôVE BEEN SUPPOTED BY OVER 3,000 SUBSCRIBERS, THANK YOU!</span>
<span>WE‚ÄôRE NOW ON OUR WAY TO OUR NEXT GOAL OF 5,000 SUBSCRIBERS!</span>
<span>HELP US TO GROW THE CHANNEL AND JOIN OUR GREAT COMMUNITY OF AVIATION ENTHUSIASTS</span>
<span class="highlight-subscribe">SUBSCRIBE</span>
<span>REMEMBER TO LIKE, SHARE & HIT THAT NOTIFICATION BELL TO STAY UP TO DATE WITH ALL OF OUR LATEST CONTENT!</span>
<span style="color: gold;">SUPPORT THE CHANNEL</span>
<span>CHECK OUT OUR BOARDING PASS & FREQUENT FLYER MEMBERSHIPS FOR EXCLUSIVE MEMBERS FIRST CONTENT!</span>
<span>HELP US TO KEEP WARM ON THOSE COLDER NIGHTS, SUPPORT US THROUGH OUR BUY ME A COFFEE PAGE ‚òïÔ∏è - LINK IN OUR CHANNEL BIO </span>
<span style="color: gold;">HAVE YOU SEEN OUR OTHER SOCIAL ACCOUNTS?</span>
<span>DON‚ÄôT FORGET TO FOLLOW @LIVEFLIGHTACTION ON TIKTOK, INSTAGRAM & FACEBOOK FOR MORE LIVE FLIGHT ACTION CONTENT!</span>
<span class="highlight-subscribe">SUBSCRIBE</span>
<span style="color: gold;"> NEXT SPECIAL EVENT:</span>
<span style="color: gold;"> üéâ EAST MIDLANDS AIRPORT 60TH ANNIVERSARY CELEBRATIONS üéâ </span>
<SPAN>WE‚ÄôLL BE LIVE ON 20TH JULY FOR THIS SPECIAL EVENT CATCHING ALL OF THE ACTION UP-CLOSE</span>
    <SPAN style="color: gold;">SPITFIRE AND RED ARROWS FLYPAST CONFIRMED</span>
 <span> *TIMINGS TBC AND FLYPASTS ARE WEATHER PERMITTING*</span> </span>
<span>*NOTE: THE RED ARROWS WILL BE PERFORMING A FLYPAST ONLY AND NOT A FULL DISPLAY* </span>
<span class="highlight-subscribe">SUBSCRIBE</span>
        </div>
      </div>
    </div>

    <div class="time-display" id="time-display"></div>
  </div>

  <script>
    async function fetchWeatherData() {
      const apiKey = '58301b9e3cb6cdfab0c2a0e6765e67d4';
      const lat = 52.8317;
      const lon = -1.3316;
      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

      try {
        const response = await fetch(url);
        const data = await response.json();

        if (data.cod === 200) {
          const temp = `${data.main.temp.toFixed(1)}¬∞C`;
          const feelsLike = `${data.main.feels_like.toFixed(1)}¬∞C`;
          const iconCode = data.weather[0].icon;
          const iconUrl = `https://openweathermap.org/img/wn/${iconCode}.png`;
          const windSpeed = `${(data.wind.speed * 1.94384).toFixed(1)} kts`;
          const windDeg = data.wind.deg;
          const visibilityMiles = (data.visibility / 1609.34).toFixed(1);

          document.getElementById('temp').innerText = temp;
          document.getElementById('feels-like').innerText = feelsLike;
          document.getElementById('weather-icon').src = iconUrl;
          document.getElementById('wind-speed').innerText = windSpeed;
          document.getElementById('visibility').innerText = `${visibilityMiles} mi`;

          // Rotate arrow (pointing from where wind is coming)
          const adjustedDirection = (windDeg + 180) % 360;
          document.getElementById('direction-arrow').style.transform = `rotate(${adjustedDirection}deg)`;
        } else {
          showError();
        }
      } catch {
        showError();
      }
    }

    function showError() {
      const fields = ['temp','feels-like','weather-icon','wind-speed','visibility'];
      fields.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.innerText = 'N/A';
      });
    }

    function updateTime() {
      const now = new Date();
      const hours = now.getHours().toString().padStart(2, '0');
      const mins = now.getMinutes().toString().padStart(2, '0');
      document.getElementById('time-display').innerText = `${hours}:${mins}`;
    }

    fetchWeatherData();
    setInterval(fetchWeatherData, 1800000); // 30 mins
    updateTime();
    setInterval(updateTime, 1000); // Update every second
  </script>
</body>
</html>
